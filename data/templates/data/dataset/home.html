{% extends "data/base.html" %}
{% load staticfiles %}

{% block title %}Global City Data{% endblock %}

{% block content %}

  <div id="showcase" class="d-block mx-auto text-center">
    <div id="bg-image"></div>
    <div class="container">
      <h1 class="text-white">Global City Data</h1>
      <div class="row" id="forms">
        <div class="col-md-5">
          {# Search Form #}
          <form method="post" id="searchForm">
            {% csrf_token %}
            <div class="input-group">
              {{ searchForm.query }}
              <div class="input-group-append">
                <button type="submit" name="search" class="btn btn-light"><i class="fa fa-search"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="col-md">
          <form method="post" id="queryForm">
            <div class="row bg-primary">
              {% csrf_token %}
              {% for field in queryForm %}
                <div class="col-md">
                  <div class="dropdown" id="queryDropdowns">
                    <a href="#" class="btn btn-primary btn-block dropdown-toggle" role="button"
                       id="dropdown{{ forloop.counter }}"
                       data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false"><label for="topic">{{ field.label }}</label></a>
                    <div class="dropdown-menu" aria-labelledby="dropdown{{ forloop.counter }}">
                      {{ field }}
                    </div>
                  </div>
                </div>
              {% endfor %}
              <input class="btn btn-success col-md-2" type="submit" value="Search" name="query">
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <section id="about">
    <div class="container text-center">
      <h2 class="mb-4">Our Purpose</h2>
      <p>Global City Data hosts descriptions of open access urban data sets and models collected and vetted by a network
        of international researchers. If you are interested in working with any of the data sets and models featured on
        this site, please use the contact link at the bottom of each detail page to be put you in contact with the
        owners of individual data sets and models.</p>
      <p>Interested in contributing to Global City Data? Learn more <a href="{% url 'data:collaborators' %}">here.</a></p>
      <a class="mt-4 btn btn-dark btn-lg js-scroll-trigger" href="#data">Datasets and Models</a>
    </div>
  </section>

  <section id="data">
    <div class="container">
      <h1 class="my-4 text-center text-white">Datasets and Models</h1>
      <div class="row">
        {% for data in datasets %}
          <section class="col-12 col-md-6 col-lg-4 my-3">
            <div class="card h-100">
              <h4 class="card-header">{{ data.title }}</h4>
              <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ data.type|title }}</h5>
                <p class="card-text">{{ data.description|truncatewords:25 }}</p>
                <a href="{{ data.get_absolute_url }}" class="btn btn-primary mt-auto">{{ data.type|title }} Detail</a>
              </div>
            </div>
          </section>
        {% empty %}
          <p id="emptyDatasets" class="m-4 text-white ">There are no datasets or models that match your query.</p>
        {% endfor %}
      </div>
    </div>

  </section>

{% endblock %}
